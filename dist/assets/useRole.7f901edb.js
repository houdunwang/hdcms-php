import{h as n,r as a}from"./index.18d78123.js";import{y as c}from"./element-plus.c3fec1c4.js";import{d as i}from"./@vue.93d749de.js";function m(r,e=1,t={}){return n.request({url:`/site/${r}/role?page=${e}&`+Object.entries(t).map(o=>o.join("=")).join("&"),method:"get"})}function f(r,e){return n.request({url:`site/${r}/role`,method:"POST",data:e})}function p(r,e){return n.request({url:`site/${r}/role/${e}`,method:"DELETE"})}function y(r,e){return n.request({url:`site/${r}/role/${e.id}`,method:"PUT",data:e})}function d(r,e){return n.request({url:`site/${r}/role/${e}`}).then(t=>t.data)}const x=()=>{const r=i(),e=i(),t=a.currentRoute.value.query.sid,o=a.currentRoute.value.query.id,s=async(u=1,l={})=>{r.value=await m(t,u,l)};return{sid:t,id:o,roles:r,role:e,del:async u=>{await c.confirm("\u786E\u8BA4\u5220\u9664\u89D2\u8272\u5417\uFF1F"),await p(t,u.id),s()},load:s,add:async u=>{await f(t,u),a.push({name:"role.index",query:{sid:t}})},update:async()=>{await y(t,e.value),a.push({name:"role.index",query:{sid:t}})},find:async u=>{e.value=await d(t,u)},current:async()=>{e.value=await d(t,o)}}};export{x as u};
