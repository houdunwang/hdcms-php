import{h as r,r as o}from"./index.11963c04.js";import{y}from"./element-plus.da21f900.js";import{d,C as p,o as f,G as _}from"./@vue.ac3c99c7.js";import{_ as $}from"./tab.c0fcca23.js";function B(e,n=1,t={}){return r.request({url:`site/${e}/admin?page=${n}&`+Object.entries(t).map(([i,a])=>`${i}=${a}`).join("&")})}async function A(e,n){return r.request({url:`site/${e}/admin`,method:"POST",data:{user_id:n}})}async function b(e,n){return r.request({url:`site/${e}/admin/${n}`,method:"DELETE"})}async function q(e,n){return r.request({url:`site/${e}/admin/${n}`}).then(t=>t.data)}async function h(e,n,t){return r.request({url:`site/${e}/admin/${n}/role`,method:"POST",data:{roles:t}})}var g=()=>{const e=d(),n=d(),t=o.currentRoute.value.query.sid,i=o.currentRoute.value.query.id,a=async(u=1,s={})=>{e.value=await B(t,u,s)},m=async u=>{await y.confirm("\u786E\u8BA4\u5220\u9664\u8BE5\u7BA1\u7406\u5458\u5417\uFF1F"),await b(t,u.id),a(1)},l=async u=>{await A(t,u.id),a()},c=async u=>{n.value=await q(t,u)};return{admins:e,admin:n,load:a,del:m,add:l,current:async()=>{await c(i)},setRole:async(u,s)=>{await h(t,u,s),o.push({name:"site.admin.index",query:{sid:t}})},find:c}};const D=p({__name:"tab",props:{site:null,admin:null},setup(e){return(n,t)=>{var a;const i=$;return f(),_(i,{tabs:[{label:"\u7AD9\u70B9\u5217\u8868",route:{name:"site.index"}},{label:"\u7BA1\u7406\u5458\u5217\u8868",route:{name:"site.admin.index",query:{sid:e.site.id}}},{label:`\u8BBE\u7F6E\u3010${(a=e.admin)==null?void 0:a.name}\u3011\u7BA1\u7406\u5458\u7684\u89D2\u8272`,route:{name:"site.admin.role"},current:!0},{label:"\u89D2\u8272\u5217\u8868",route:{name:"role.index"}}]},null,8,["tabs"])}}});export{D as _,g as u};
