import{h as i,r as o}from"./index.c29e1f0e.js";import{u as p}from"./element-plus.3904763a.js";import{e as c,C as f,o as y,G as _}from"./@vue.d2db270f.js";import{_ as $}from"./tab.a2965159.js";function B(e,n=1,t={}){return i.request({url:`site/${e}/admin?page=${n}&`+Object.entries(t).map(([s,u])=>`${s}=${u}`).join("&")})}async function A(e,n){return i.request({url:`site/${e}/admin`,method:"POST",data:{user_id:n}})}async function b(e,n){return i.request({url:`site/${e}/admin/${n}`,method:"DELETE"})}async function h(e,n){return i.request({url:`site/${e}/admin/${n}`}).then(t=>t.data)}async function E(e,n,t){return i.request({url:`site/${e}/admin/${n}/role`,method:"POST",data:{roles:t}})}var g=()=>{const e=c(),n=c(),t=o.currentRoute.value.params.sid,s=o.currentRoute.value.params.id,u=async(a=1,r={})=>{e.value=await B(t,a,r)},d=async a=>{await p.confirm("\u786E\u8BA4\u5220\u9664\u8BE5\u7BA1\u7406\u5458\u5417\uFF1F"),await b(t,a.id),u(1)},l=async a=>{await A(t,a.id),u()},m=async a=>{n.value=await h(t,a)};return{admins:e,admin:n,load:u,del:d,add:l,current:async()=>{await m(s)},setRole:async(a,r)=>{await E(t,a,r),o.push({name:"site.admin.index",params:{sid:t}})},find:m}};const D=f({__name:"tab",props:{site:null,admin:null},setup(e){return(n,t)=>{var u;const s=$;return y(),_(s,{tabs:[{label:"\u7AD9\u70B9\u5217\u8868",route:{name:"site.index"}},{label:"\u7BA1\u7406\u5458\u5217\u8868",route:{name:"site.admin.index",params:{sid:e.site.id}}},{label:`\u8BBE\u7F6E\u3010${(u=e.admin)==null?void 0:u.name}\u3011\u7BA1\u7406\u5458\u7684\u89D2\u8272`,route:{name:"site.admin.role"},current:!0},{label:"\u89D2\u8272\u5217\u8868",route:{name:"role.index"}}]},null,8,["tabs"])}}});export{D as _,g as u};
